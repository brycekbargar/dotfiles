---
- name: Sync and update ports
  become: true
  community.general.macports:
    selfupdate: true
    upgrade: true

- name: Install/replace macos tools
  become: true
  community.general.macports:
    name:
      - bash
      - git
      - gnutar
      - gutils-suite
      - less
      - unzip
      - vim
      - zsh
    state: installed

- name: Install kitty
  ansible.builtin.shell:
    cmd: >
      curl -L https://sw.kovidgoyal.net/kitty/installer.sh | sh /dev/stdin
      installer="nightly"
      launch="n"
      dest="{{ lookup('env', 'XDG_PKG_HOME') }}/apps"
    creates: "{{ lookup('env', 'XDG_PKG_HOME') }}/apps/kitty.app"
